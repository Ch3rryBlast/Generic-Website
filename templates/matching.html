<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0" />
<title>Parts Marketplace</title>

<style>
:root{
  --bg:#f5f7fa;
  --card:#ffffff;
  --text:#1f2937;
  --muted:#6b7280;
  --green:#2e7d32;
  --green2:#66bb6a;
  --border:#e5e7eb;
  --shadow:0 10px 30px rgba(0,0,0,.07);
  --radius:18px;
}

body{
  margin:0;
  display:flex;
  min-height:100vh;
  background:var(--bg);
  color:var(--text);
  font-family: ui-sans-serif, system-ui, Segoe UI, Roboto, Arial;
}

/* Sidebar included separately */
.content{
  flex:1;
  padding:28px 60px 40px;
  display:flex;
  flex-direction:column;
  gap:18px;
}

.title h1{
  margin:0;
  font-size:32px;
  letter-spacing:.2px;
  color:var(--green);
}
.title p{
  margin:0;
  color:var(--muted);
  font-size:14px;
}

.grid{
  display:grid;
  grid-template-columns:360px 1fr;
  gap:18px;
  align-items:start;
}
@media (max-width:980px){
  .grid{grid-template-columns:1fr;}
}

.card{
  background:var(--card);
  border:1px solid var(--border);
  box-shadow: var(--shadow);
  border-radius: var(--radius);
  padding:18px;
}

.card h2{
  margin:0 0 14px 0;
  font-size:18px;
  color:var(--text);
}

.form{
  display:flex;
  flex-direction:column;
  gap:10px;
}

label{
  font-size:13px;
  color:var(--muted);
  font-weight:700;
  margin-top:4px;
}

input, select, textarea{
  width:95%;
  padding:12px;
  border-radius:12px;
  border:1px solid var(--border);
  outline:none;
  background:#fff;
  font-size:14px;
}
textarea{
  resize: none;
}
input:focus, select:focus, textarea:focus{
  border-color:#b7ddb9;
  box-shadow:0 0 0 4px rgba(102,187,106,.18);
}

button{
  margin-top:6px;
  padding:12px 14px;
  border-radius:12px;
  border:none;
  background: linear-gradient(135deg,var(--green2),var(--green));
  color:white;
  font-weight:900;
  letter-spacing:.2px;
  cursor:pointer;
  transition: transform .08s ease, filter .2s ease;
}
button:hover{filter:brightness(1.03);}
button:active{transform:translateY(1px);}

/* Listings */
.listings{
  display:flex;
  flex-direction:column;
  gap:12px;
  max-height:500px;
  overflow:auto;
}
.listing-card{
  border:1px solid var(--border);
  border-radius:14px;
  padding:14px 16px;
  background:#fff;
  box-shadow:0 4px 10px rgba(0,0,0,0.05);
  transition: transform 0.2s;
}
.listing-card:hover{transform:translateY(-2px);}
.listing-card h3{
  margin:0 0 6px 0;
  color:var(--green);
}
.listing-card p{
  margin:3px 0;
  color:var(--text);
}
.listing-card .small{
  font-size:12px;
  color:var(--muted);
}
</style>

</head>
<body>
{% include 'sidebar.html' %}

<div class="content">
  <div class="title">
    <h1>Parts Marketplace</h1>
    <p>Donate or browse parts shared by the community</p>
  </div>

  <div class="grid">
    <!-- LEFT: Form -->
    <div class="card">
      <h2>Donate a Part</h2>
      <form id="marketForm" class="form">
        <label for="partName">Part Name</label>
        <input type="text" id="partName" placeholder="e.g., Motor, Sensor" required>

        <label for="partCondition">Condition</label>
        <select id="partCondition" required>
          <option value="">--Select Condition--</option>
          <option value="New">New</option>
          <option value="Like New">Like New</option>
          <option value="Used">Used</option>
        </select>

        <label for="partDescription">Description</label>
        <textarea id="partDescription" rows="3" placeholder="Add any details..."></textarea>

        <button type="submit">Post Part</button>
      </form>
    </div>

    <!-- RIGHT: Listings -->
    <div class="card">
      <h2>Available Parts</h2>
      <div class="listings" id="listingsContainer"></div>
    </div>
  </div>
</div>

<script>
const marketForm = document.getElementById('marketForm');
const listingsContainer = document.getElementById('listingsContainer');

let listings = JSON.parse(localStorage.getItem('marketListings')) || [];

function renderListings(){
  listingsContainer.innerHTML = '';
  listings.slice().reverse().forEach(listing=>{
    const card = document.createElement('div');
    card.className = 'listing-card';
    card.innerHTML = `
      <h3>${listing.name}</h3>
      <p class="small">Condition: ${listing.condition}</p>
      <p>${listing.description || 'No description provided'}</p>
      <p class="small">Posted on: ${listing.date}</p>
    `;
    listingsContainer.appendChild(card);
  });
}

marketForm.addEventListener('submit', e=>{
  e.preventDefault();
  const name = document.getElementById('partName').value.trim();
  const condition = document.getElementById('partCondition').value;
  const description = document.getElementById('partDescription').value.trim();
  const date = new Date().toLocaleDateString();

  if(!name || !condition) return;

  listings.push({name, condition, description, date});
  localStorage.setItem('marketListings', JSON.stringify(listings));
  renderListings();
  marketForm.reset();
});

renderListings();
</script>

</body>
</html>